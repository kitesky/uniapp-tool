{"version":3,"names":["_sfc_main","name","data","methods","_objectSpread2","mapActions","stores_user","user","onChangeCheckbox","e","detail","value","checkedValue","parseInt","getUserProfile","that","toast","error","common_vendor","index","desc","success","weixinRes","login","userInfo","showLoading","mask","provider","loginRes","wxLogin","code","then","res","status","hideLoading","switchTab","url","$helper","message","wx","createComponent","Component"],"sources":["mp-weixin.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov5bel5YW3QVBQL3VuaWFwcC10b29sL2NvbXBvbmVudHMvbG9naW4vbXAtd2VpeGluLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<uni-card class=\"text-center\">\r\n\t\t<view class=\"mb-3\">\r\n\t\t\t<image mode=\"heightFix\" style=\"height: 100px;\" src=\"/static/logo.png\"></image>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"p-3\">\r\n\t\t\t<button @click=\"getUserProfile\" type=\"default\">微信一键登录</button>\r\n\t\t\t<view style=\"font-size:14px;color: #999;margin-top: 10px;\">\r\n\t\t\t\t<checkbox-group @change=\"onChangeCheckbox\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<checkbox :checked=\"checked\" value=\"1\" color=\"#00c800\"\r\n\t\t\t\t\t\t\tstyle=\"transform:scale(0.7);border-radius: 50px;\" />已阅读并同意\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<text @click=\"onClickAgree\" style=\"color:#00c800\">《服务协议声明》</text>\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-card>\r\n</template>\r\n\r\n<script>\r\n\timport { user } from '@/stores/user'\r\n\texport default {\r\n\t\tname: 'MPWexinLogin',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(user, ['wxLogin']),\r\n\t\t\tonChangeCheckbox(e) {\r\n\t\t\t\tif (e.detail.value) {\r\n\t\t\t\t\tthis.checkedValue = parseInt(e.detail.value[0])\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUserProfile() {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t\tif (that.checkedValue != 1) {\r\n\t\t\t\t\tthat.toast.error('请同意服务协议')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: '用于完善会员资料',\r\n\t\t\t\t\tsuccess: function(weixinRes) {\r\n\t\t\t\t\t\tthat.login(weixinRes.userInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tlogin(userInfo) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\t// 开启加载loading\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\tthat.wxLogin({\r\n\t\t\t\t\t\t\tcode: loginRes.code,\r\n\t\t\t\t\t\t\tuserInfo: userInfo\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tif (res.status == true) {\r\n\t\t\t\t\t\t\t\t// uni.navigateBack({ delta: 1 })\r\n\r\n\t\t\t\t\t\t\t\t// 关闭loading\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/tabs/my'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 关闭loading\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tthat.$helper.toast(res.message)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import Component from 'E:/工具APP/uniapp-tool/components/login/mp-weixin.vue'\nwx.createComponent(Component)"],"mappings":";;;;;;;AAuBC,IAAKA,SAAA,GAAU;EACdC,IAAA,EAAM;EACNC,IAAA,WAAAA,KAAA,EAAO;IACN,OAAO,CAEP;EACA;EACDC,OAAA,EAAAC,cAAA,CAAAA,cAAA,KACIC,UAAA,CAAWC,WAAA,CAAAC,IAAA,EAAM,CAAC,SAAS,CAAC;IAC/BC,gBAAA,WAAAA,iBAAiBC,CAAA,EAAG;MACnB,IAAIA,CAAA,CAAEC,MAAA,CAAOC,KAAA,EAAO;QACnB,KAAKC,YAAA,GAAeC,QAAA,CAASJ,CAAA,CAAEC,MAAA,CAAOC,KAAA,CAAM,CAAC,CAAC;MAC/C;IACA;IACDG,cAAA,WAAAA,eAAA,EAAiB;MAChB,IAAIC,IAAA,GAAO;MAEX,IAAIA,IAAA,CAAKH,YAAA,IAAgB,GAAG;QAC3BG,IAAA,CAAKC,KAAA,CAAMC,KAAA,CAAM,SAAS;QAC1B,OAAO;MACR;MAEAC,aAAA,CAAAC,KAAA,CAAIL,cAAA,CAAe;QAClBM,IAAA,EAAM;QACNC,OAAA,EAAS,SAAAA,QAASC,SAAA,EAAW;UAC5BP,IAAA,CAAKQ,KAAA,CAAMD,SAAA,CAAUE,QAAQ;QAC9B;MAAA,CACA;IACD;IACDD,KAAA,WAAAA,MAAMC,QAAA,EAAU;MACf,IAAIT,IAAA,GAAO;MAEXG,aAAA,CAAAC,KAAA,CAAIM,WAAA,CAAY;QACfC,IAAA,EAAM;MAAA,CACN;MACDR,aAAA,CAAAC,KAAA,CAAII,KAAA,CAAM;QACTI,QAAA,EAAU;QACVN,OAAA,EAAS,SAAAA,QAASO,QAAA,EAAU;UAC3Bb,IAAA,CAAKc,OAAA,CAAQ;YACZC,IAAA,EAAMF,QAAA,CAASE,IAAA;YACfN,QAAA,EAAAA;UAAA,CACA,EAAEO,IAAA,CAAK,UAAAC,GAAA,EAAO;YACd,IAAIA,GAAA,CAAIC,MAAA,IAAU,MAAM;cAIvBf,aAAA,CAAAC,KAAA,CAAIe,WAAA,EAAY;cAChBhB,aAAA,CAAAC,KAAA,CAAIgB,SAAA,CAAU;gBACbC,GAAA,EAAK;cAAA,CACL;YAAA,OACK;cAENlB,aAAA,CAAAC,KAAA,CAAIe,WAAA,EAAY;cAChBnB,IAAA,CAAKsB,OAAA,CAAQrB,KAAA,CAAMgB,GAAA,CAAIM,OAAO;YAC/B;UAAA,CACA;QACF;MACD,CAAC;IACF;EAAA;AAEF;;;;;;;;;;;;;;;;;;;;;AClFDC,EAAA,CAAGC,eAAA,CAAgBC,SAAS","ignoreList":[]}