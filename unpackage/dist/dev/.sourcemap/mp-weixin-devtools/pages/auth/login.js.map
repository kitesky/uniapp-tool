{"version":3,"names":["MPWexinLogin","_sfc_main","components","data","methods","onChangeCheckbox","e","detail","value","checkedValue","parseInt","onClickAgree","common_vendor","index","navigateTo","url","onGridChange","getUserProfile","that","$helper","toast","desc","success","weixinRes","login","userInfo","showLoading","mask","provider","loginRes","wxLogin","code","then","res","status","hideLoading","switchTab","message","wx","createPage","MiniProgramPage"],"sources":["login.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXV0aC9sb2dpbi52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"login-card\">\r\n\t\t<view class=\"login-logo\">\r\n\t\t\t<image mode=\"heightFix\" style=\"height: 100px;\" src=\"/static/logo.png\"></image>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"wechat-login\">\r\n\t\t\t<button @click=\"getUserProfile\" style=\"background-color: #00c800;color: #fff;border-radius: 50px;\"\r\n\t\t\t\ttype=\"default\">微信一键登录</button>\r\n\t\t\t<view style=\"font-size:14px;color: #999;margin-top: 10px;\">\r\n\t\t\t\t<checkbox-group @change=\"onChangeCheckbox\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<checkbox :checked=\"checked\" value=\"1\" color=\"#00c800\"\r\n\t\t\t\t\t\t\tstyle=\"transform:scale(0.7);border-radius: 50px;\" />已阅读并同意\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<text @click=\"onClickAgree\" style=\"color:#00c800\">《服务协议声明》</text>\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"other-login\">\r\n\t\t\t<view class=\"divider divider-center divider-hairline\">其他方式</view>\r\n\r\n\t\t\t<uni-grid :column=\"3\" :show-border=\"false\" :square=\"false\" @change=\"onGridChange\">\r\n\t\t\t\t<uni-grid-item>\r\n\t\t\t\t\t<view class=\"grid-item-content\">\r\n\t\t\t\t\t\t<uni-icons type=\"image\" :size=\"32\" color=\"#777\" />\r\n\t\t\t\t\t\t<text class=\"grid-item-text\">帐号登录</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-grid-item>\r\n\t\t\t\t<uni-grid-item>\r\n\t\t\t\t\t<view class=\"grid-item-content\">\r\n\t\t\t\t\t\t<uni-icons type=\"image\" :size=\"32\" color=\"#777\" />\r\n\t\t\t\t\t\t<text class=\"grid-item-text\">注册新用户</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-grid-item>\r\n\t\t\t\t<uni-grid-item>\r\n\t\t\t\t\t<view class=\"grid-item-content\">\r\n\t\t\t\t\t\t<uni-icons type=\"image\" :size=\"32\" color=\"#777\" />\r\n\t\t\t\t\t\t<text class=\"grid-item-text\">找回密码</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-grid-item>\r\n\t\t\t</uni-grid>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/* #ifdef MP-WEIXIN */\r\n\timport MPWexinLogin from '@/components/login/mp-weixin.vue'\r\n\t/* #endif */\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t/* #ifdef MP-WEIXIN */\r\n\t\t\tMPWexinLogin,\r\n\t\t\t/* #endif */\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n            onChangeCheckbox(e) {\n                if (e.detail.value) {\n                    this.checkedValue = parseInt(e.detail.value[0])\n                }\n            },\n            onClickAgree() {\n                uni.navigateTo({ url: '/pages/agreement/policy' });\n            },\n            onGridChange(e) {\n\n            },\n            getUserProfile() {\n                var that = this\n\n                if (that.checkedValue != 1) {\n                    that.$helper.toast('请同意服务协议')\n                    return false\n                }\n\n                uni.getUserProfile({\n                      desc: '用于完善会员资料',\n                      success: function (weixinRes) {\n                            that.login(weixinRes.userInfo)\n                      }\n                })\n            },\n            login(userInfo) {\n                var that = this\n                // 开启加载loading\n                uni.showLoading({mask: true})\n                uni.login({\n                      provider: 'weixin',\n                      success: function (loginRes) {\n                             that.wxLogin({code: loginRes.code, userInfo: userInfo }).then(res => {\n                                if (res.status == true) {\n                                    // uni.navigateBack({ delta: 1 })\n\n                                    // 关闭loading\n                                    uni.hideLoading()\n                                    uni.switchTab({ url: '/pages/tabs/my' })\n                                } else {\n                                    // 关闭loading\n                                    uni.hideLoading()\n                                    that.$helper.toast(res.message)\n                                }\n                            })\n                      }\n                });\n            }\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import MiniProgramPage from 'E:/工具APP/uniapp-tool/pages/auth/login.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;AAiDC,IAAKA,YAAA,GAAgB,SAAhBA,aAAA;EAAA,OAA2B;AAAA;AAEhC,IAAKC,SAAA,GAAU;EACdC,UAAA,EAAY;IAEXF,YAAA,EAAAA;EAEA;EACDG,IAAA,WAAAA,KAAA,EAAO;IACN,OAAO,CAEP;EACA;EACDC,OAAA,EAAS;IACCC,gBAAA,WAAAA,iBAAiBC,CAAA,EAAG;MAChB,IAAIA,CAAA,CAAEC,MAAA,CAAOC,KAAA,EAAO;QAChB,KAAKC,YAAA,GAAeC,QAAA,CAASJ,CAAA,CAAEC,MAAA,CAAOC,KAAA,CAAM,CAAC,CAAC;MAClD;IACH;IACDG,YAAA,WAAAA,aAAA,EAAe;MACXC,aAAA,CAAAC,KAAA,CAAIC,UAAA,CAAW;QAAEC,GAAA,EAAK;MAA2B;IACpD;IACDC,YAAA,WAAAA,aAAaV,CAAA,EAAG,CAEf;IACDW,cAAA,WAAAA,eAAA,EAAiB;MACb,IAAIC,IAAA,GAAO;MAEX,IAAIA,IAAA,CAAKT,YAAA,IAAgB,GAAG;QACxBS,IAAA,CAAKC,OAAA,CAAQC,KAAA,CAAM,SAAS;QAC5B,OAAO;MACX;MAEAR,aAAA,CAAAC,KAAA,CAAII,cAAA,CAAe;QACbI,IAAA,EAAM;QACNC,OAAA,EAAS,SAAAA,QAAUC,SAAA,EAAW;UACxBL,IAAA,CAAKM,KAAA,CAAMD,SAAA,CAAUE,QAAQ;QACnC;MAAA,CACL;IACJ;IACDD,KAAA,WAAAA,MAAMC,QAAA,EAAU;MACZ,IAAIP,IAAA,GAAO;MAEXN,aAAA,CAAAC,KAAA,CAAIa,WAAA,CAAY;QAACC,IAAA,EAAM;MAAI,CAAC;MAC5Bf,aAAA,CAAAC,KAAA,CAAIW,KAAA,CAAM;QACJI,QAAA,EAAU;QACVN,OAAA,EAAS,SAAAA,QAAUO,QAAA,EAAU;UACtBX,IAAA,CAAKY,OAAA,CAAQ;YAACC,IAAA,EAAMF,QAAA,CAASE,IAAA;YAAMN,QAAA,EAAAA;UAAoB,GAAEO,IAAA,CAAK,UAAAC,GAAA,EAAO;YAClE,IAAIA,GAAA,CAAIC,MAAA,IAAU,MAAM;cAIpBtB,aAAA,CAAAC,KAAA,CAAIsB,WAAA,EAAY;cAChBvB,aAAA,CAAAC,KAAA,CAAIuB,SAAA,CAAU;gBAAErB,GAAA,EAAK;cAAA,CAAkB;YAAA,OACpC;cAEHH,aAAA,CAAAC,KAAA,CAAIsB,WAAA,EAAY;cAChBjB,IAAA,CAAKC,OAAA,CAAQC,KAAA,CAAMa,GAAA,CAAII,OAAO;YAClC;UAAA,CACH;QACP;MACN,CAAC;IACL;EACV;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHDC,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}