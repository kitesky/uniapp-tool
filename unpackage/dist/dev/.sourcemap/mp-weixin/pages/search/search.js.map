{"version":3,"file":"search.js","sources":["pages/search/search.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VhcmNoL3NlYXJjaC52dWU"],"sourcesContent":["<template>\r\n    <view class=\"sticky-top\">\r\n        <view class=\"bg-body-secondary bg-opacity-75\">\r\n            <uni-search-bar\r\n                v-model=\"keywords\"\r\n                :focus=\"true\"\r\n                placeholder=\"搜索关键词...\"\r\n                radius=\"100\"\r\n                maxlength=\"100\"\r\n                @confirm=\"onSearch\"\r\n                @cancel=\"onCancel\"\r\n                @clear=\"onCancel\"\r\n            />\r\n        </view>\r\n    </view>\r\n\r\n    <view v-if=\"search == false\">\r\n        <uni-section v-if=\"history.length > 0\" title=\"历史搜索\" titleFontSize=\"15px\" type=\"square\">\r\n            <template v-slot:right>\r\n                <uni-icons @click=\"clearHistoryData\" type=\"trash\" size=\"22\"></uni-icons>\r\n            </template>\r\n            \r\n            <view class=\"search-content\">\r\n                <template v-for=\"(item, index) in history\" :key=\"index\">\r\n                    <text @click=\"onClickKeywords(item)\" class=\"title\">{{ item }}</text>\r\n                </template>\r\n            </view>\r\n        </uni-section>\r\n\r\n        <uni-section title=\"热门搜索\" titleFontSize=\"15px\" type=\"square\">\r\n            <view class=\"search-content\">\r\n                <template v-for=\"(item, index) in hot\" :key=\"index\">\r\n                    <text @click=\"onClickKeywords(item)\" class=\"title\">{{ item }}</text>\r\n                </template>\r\n            </view>\r\n        </uni-section>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    import { mapActions } from 'pinia'\r\n    export default {\r\n        components: {\r\n        },\r\n        data() {\r\n            return {\r\n                search: false, // 0 搜索面板 1 结果面板\r\n                keywords: '',\r\n                params: { keywords: '' },\r\n                isFetch: false,\r\n                history: [],\r\n                hot: []\r\n            }\r\n        },\r\n        onPullDownRefresh() {\r\n\r\n        },\r\n        onShareAppMessage() {},\r\n        mounted() {\r\n            // 获取搜索历史\r\n            this.getHistoryData()\r\n            this.fetchHotSearch()\r\n        },\r\n        methods: {\r\n            fetchHotSearch() {\r\n                var that = this\r\n            },\r\n            onSearch() {\r\n                this.search = true\r\n                this.isFetch = true\r\n                // 设置搜索历史\r\n                this.params.keywords = this.keywords\r\n                this.setHistoryData(this.keywords)\r\n            },\r\n            onCancel() {\r\n                this.search = false\r\n                this.isFetch = false\r\n            },\r\n            getHistoryData() {\r\n                var history = uni.getStorageSync('searchHistoryKeywords')\r\n                // 位置有限，后20个\r\n                if (history.length > 20) {\r\n                    this.history = history.slice(-20)\r\n                } else {\r\n                    this.history = history ? history : []\r\n                }\r\n            },\r\n            setHistoryData(keywords) {\r\n                var data = this.history\r\n\r\n                // 是否在数组中 删除\r\n                var index = data.indexOf(keywords)\r\n                if (index > -1) {\r\n                    data.splice(index, 1)\r\n                }\r\n                data.push(keywords)\r\n                uni.setStorageSync('searchHistoryKeywords', data)\r\n            },\r\n            clearHistoryData() {\r\n                var that = this\r\n                uni.showModal({\r\n                    title: '确认提示',\r\n                    content: '确定要删除搜索记录?',\r\n                    success: function (res) {\r\n                        if (res.confirm) {\r\n                            uni.removeStorageSync('searchHistoryKeywords')\r\n                            that.history = []\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            onClickKeywords(keywords) {\r\n                this.keywords = keywords\r\n                this.onSearch()\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n.search-content {\r\n    padding: 0 10px 10px 10px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n}\r\n.title {\r\n    padding: 3px 15px;\r\n    margin: 3px 5px;\r\n    background-color: #f2f2f2;\r\n    border-radius: 20px;\r\n    color:#3b4144;\r\n    font-size: 14px;\r\n}\r\n</style>","import MiniProgramPage from 'E:/工具APP/uniapp-tool/pages/search/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;;EA4CQ,OAAA;AACI,WAAA;AAAA;;;MAGI,QAAA,EAAA,UAAA,GAAA;AAAA;;;IAIJ;AAAA;EAEJ,oBAAA;AAAA;EAGA,oBAAA;AAAA,EAAA;AAAA,EACA,UAAA;AAEI,SAAA,eAAA;AACA,SAAA,eAAA;AAAA;EAEJ,SAAA;AAAA,IACI,iBAAA;AAAA;;AAII,WAAA,SAAA;AACA,WAAA,UAAA;AAEA,WAAA,OAAA,WAAA,KAAA;AACA,WAAA,eAAA,KAAA,QAAA;AAAA;;AAGA,WAAA,SAAA;AACA,WAAA,UAAA;AAAA;IAEJ,iBAAA;;AAGI,UAAA,QAAA,SAAA,IAAA;AACI,aAAA,UAAA,QAAA,MAAA,GAAA;AAAA;AAEA,aAAA,UAAA,UAAA,UAAA,CAAA;AAAA,MACJ;AAAA;;AAGA,UAAA,OAAA,KAAA;AAGA,UAAA,QAAA,KAAA,QAAA,QAAA;;AAEI,aAAA,OAAA,OAAA,CAAA;AAAA,MACJ;AACA,WAAA,KAAA,QAAA;;;IAGJ,mBAAA;;AAEIA,oBAAAA,MAAA,UAAA;AAAA;QAEI,SAAA;AAAA,QACA,SAAA,SAAA,KAAA;AACI,cAAA,IAAA,SAAA;AACIA,0BAAA,MAAA,kBAAA,uBAAA;AACA,iBAAA,UAAA,CAAA;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ,CAAA;AAAA;;AAGA,WAAA,WAAA;AACA,WAAA,SAAA;AAAA,IACJ;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHJ,GAAG,WAAW,eAAe;"}