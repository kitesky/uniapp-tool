{"version":3,"file":"mp-weixin.js","sources":["components/login/mp-weixin.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov5bel5YW3QVBQL3VuaWFwcC10b29sL2NvbXBvbmVudHMvbG9naW4vbXAtd2VpeGluLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<uni-card class=\"text-center\">\r\n\t\t<view class=\"mb-3\">\r\n\t\t\t<image mode=\"heightFix\" style=\"height: 100px;\" src=\"/static/logo.png\"></image>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"p-3\">\r\n\t\t\t<button @click=\"getUserProfile\" type=\"default\">微信一键登录</button>\r\n\t\t\t<view style=\"font-size:14px;color: #999;margin-top: 10px;\">\r\n\t\t\t\t<checkbox-group @change=\"onChangeCheckbox\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<checkbox :checked=\"checked\" value=\"1\" color=\"#00c800\"\r\n\t\t\t\t\t\t\tstyle=\"transform:scale(0.7);border-radius: 50px;\" />已阅读并同意\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<text @click=\"onClickAgree\" style=\"color:#00c800\">《服务协议声明》</text>\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-card>\r\n</template>\r\n\r\n<script>\r\n\timport { mapActions } from 'pinia'\r\n\timport { userStore } from '@/stores/user'\r\n\texport default {\r\n\t\tname: 'MPWexinLogin',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(userStore, ['wxLogin']),\r\n\t\t\tonChangeCheckbox(e) {\r\n\t\t\t\tif (e.detail.value) {\r\n\t\t\t\t\tthis.checkedValue = parseInt(e.detail.value[0])\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUserProfile() {\r\n\t\t\t\tvar that = this\r\n\r\n\t\t\t\tif (that.checkedValue != 1) {\r\n\t\t\t\t\tthat.toast.error('请同意服务协议')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: '用于完善会员资料',\r\n\t\t\t\t\tsuccess: function(weixinRes) {\r\n\t\t\t\t\t\tthat.login(weixinRes.userInfo)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tlogin(userInfo) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\t// 开启加载loading\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\tconsole.log('loginRes', loginRes)\r\n\t\t\t\t\t\tthat.wxLogin({\r\n\t\t\t\t\t\t\tcode: loginRes.code,\r\n\t\t\t\t\t\t\tuserInfo: userInfo\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl: '/pages/user/index'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t// 关闭loading\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import Component from 'E:/工具APP/uniapp-tool/components/login/mp-weixin.vue'\nwx.createComponent(Component)"],"names":["mapActions","userStore","uni"],"mappings":";;;;AAwBC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO;AACN,WAAO,CAEP;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,GAAGA,yBAAWC,YAAAA,WAAW,CAAC,SAAS,CAAC;AAAA,IACpC,iBAAiB,GAAG;AACnB,UAAI,EAAE,OAAO,OAAO;AACnB,aAAK,eAAe,SAAS,EAAE,OAAO,MAAM,CAAC,CAAC;AAAA,MAC/C;AAAA,IACA;AAAA,IACD,iBAAiB;AAChB,UAAI,OAAO;AAEX,UAAI,KAAK,gBAAgB,GAAG;AAC3B,aAAK,MAAM,MAAM,SAAS;AAC1B,eAAO;AAAA,MACR;AAEAC,oBAAAA,MAAI,eAAe;AAAA,QAClB,MAAM;AAAA,QACN,SAAS,SAAS,WAAW;AAC5B,eAAK,MAAM,UAAU,QAAQ;AAAA,QAC9B;AAAA,OACA;AAAA,IACD;AAAA,IACD,MAAM,UAAU;AACf,UAAI,OAAO;AAEXA,oBAAAA,MAAI,YAAY;AAAA,QACf,MAAM;AAAA,OACN;AACDA,oBAAAA,MAAI,MAAM;AAAA,QACT,UAAU;AAAA,QACV,SAAS,SAAS,UAAU;AAC3BA,wBAAAA,MAAY,MAAA,OAAA,wCAAA,YAAY,QAAQ;AAChC,eAAK,QAAQ;AAAA,YACZ,MAAM,SAAS;AAAA,YACf;AAAA,WACA,EAAE,KAAK,SAAO;AACdA,0BAAAA,MAAI,UAAU;AAAA,cACb,KAAK;AAAA,aACL;AAAA,WACD;AAAA,QACD;AAAA,QACD,UAAU,WAAW;AAEpBA,wBAAAA,MAAI,YAAY;AAAA,QACjB;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;AC9ED,GAAG,gBAAgB,SAAS;"}